<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>Vim - FC</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 5.0.0"></head>


<body>
  <header style="height: 40vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
                Vim
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-12-13 16:03">
      2020年12月13日 下午
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.1k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      42
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <h2 id="Shortcut-keys"><a href="#Shortcut-keys" class="headerlink" title="Shortcut keys"></a>Shortcut keys</h2><table>
<thead>
<tr>
<th align="left">Shortcut Keys</th>
<th align="left">Function</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Main</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Escape key</td>
<td align="left">Gets out of the current mode into the “command mode”. All keys are bound of commands.</td>
</tr>
<tr>
<td align="left">i</td>
<td align="left">“Insert mode” for inserting text. Keys behave as expected.</td>
</tr>
<tr>
<td align="left">:</td>
<td align="left">“Last-line mode” where Vim expects you to enter a command such as to save the document.</td>
</tr>
<tr>
<td align="left">:ter[minal]</td>
<td align="left">Open a terminal window</td>
</tr>
<tr>
<td align="left">Navigation keys</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">h</td>
<td align="left">moves the cursor one character to the left.</td>
</tr>
<tr>
<td align="left">j or Ctrl + J</td>
<td align="left">moves the cursor down one line.</td>
</tr>
<tr>
<td align="left">k or Ctrl + P</td>
<td align="left">moves the cursor up one line.</td>
</tr>
<tr>
<td align="left">l</td>
<td align="left">moves the cursor one character to the right.</td>
</tr>
<tr>
<td align="left">0</td>
<td align="left">moves the cursor to the beginning of the line.</td>
</tr>
<tr>
<td align="left">$</td>
<td align="left">moves the cursor to the end of the line.</td>
</tr>
<tr>
<td align="left">^</td>
<td align="left">moves the cursor to the first non-empty character of the line</td>
</tr>
<tr>
<td align="left">w</td>
<td align="left">move forward one word (next alphanumeric word)</td>
</tr>
<tr>
<td align="left">W</td>
<td align="left">move forward one word (delimited by a white space)</td>
</tr>
<tr>
<td align="left">5w</td>
<td align="left">move forward five words</td>
</tr>
<tr>
<td align="left">b</td>
<td align="left">move backward one word (previous alphanumeric word)</td>
</tr>
<tr>
<td align="left">B</td>
<td align="left">move backward one word (delimited by a white space)</td>
</tr>
<tr>
<td align="left">5b</td>
<td align="left">move backward five words</td>
</tr>
<tr>
<td align="left">G</td>
<td align="left">move to the end of the file</td>
</tr>
<tr>
<td align="left">gg</td>
<td align="left">move to the beginning of the file.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Navigate around the document</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">(</td>
<td align="left">jumps to the previous sentence</td>
</tr>
<tr>
<td align="left">)</td>
<td align="left">jumps to the next sentence</td>
</tr>
<tr>
<td align="left">{</td>
<td align="left">jumps to the previous paragraph</td>
</tr>
<tr>
<td align="left">}</td>
<td align="left">jumps to the next paragraph</td>
</tr>
<tr>
<td align="left">[[</td>
<td align="left">jumps to the previous section</td>
</tr>
<tr>
<td align="left">]]</td>
<td align="left">jumps to the next section</td>
</tr>
<tr>
<td align="left">[]</td>
<td align="left">jump to the end of the previous section</td>
</tr>
<tr>
<td align="left">][</td>
<td align="left">jump to the end of the next section</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Insert text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">Insert text after the cursor</td>
</tr>
<tr>
<td align="left">A</td>
<td align="left">Insert text at the end of the line</td>
</tr>
<tr>
<td align="left">i</td>
<td align="left">Insert text before the cursor</td>
</tr>
<tr>
<td align="left">o</td>
<td align="left">Begin a new line below the cursor</td>
</tr>
<tr>
<td align="left">O</td>
<td align="left">Begin a new line above the cursor</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Special inserts</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">:r [filename]</td>
<td align="left">Insert the file [filename] below the cursor</td>
</tr>
<tr>
<td align="left">:r ![command]</td>
<td align="left">Execute [command] and insert its output below the cursor</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Delete text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">x</td>
<td align="left">delete character at cursor</td>
</tr>
<tr>
<td align="left">dw</td>
<td align="left">delete a word.</td>
</tr>
<tr>
<td align="left">d0</td>
<td align="left">delete to the beginning of a line.</td>
</tr>
<tr>
<td align="left">d$</td>
<td align="left">delete to the end of a line.</td>
</tr>
<tr>
<td align="left">d)</td>
<td align="left">delete to the end of sentence.</td>
</tr>
<tr>
<td align="left">dgg</td>
<td align="left">delete to the beginning of the file.</td>
</tr>
<tr>
<td align="left">dG</td>
<td align="left">delete to the end of the file.</td>
</tr>
<tr>
<td align="left">dd</td>
<td align="left">delete line</td>
</tr>
<tr>
<td align="left">3dd</td>
<td align="left">delete three lines</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Simple replace text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">r{text}</td>
<td align="left">Replace the character under the cursor with {text}</td>
</tr>
<tr>
<td align="left">R</td>
<td align="left">Replace characters instead of inserting them</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Copy/Paste text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">yy</td>
<td align="left">copy current line into storage buffer</td>
</tr>
<tr>
<td align="left">[“x]yy</td>
<td align="left">Copy the current lines into register x</td>
</tr>
<tr>
<td align="left">p</td>
<td align="left">paste storage buffer after current line</td>
</tr>
<tr>
<td align="left">P</td>
<td align="left">paste storage buffer before current line</td>
</tr>
<tr>
<td align="left">[“x]p</td>
<td align="left">paste from register x after current line</td>
</tr>
<tr>
<td align="left">[“x]P</td>
<td align="left">paste from register x before current line</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Undo/Redo operation</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">u</td>
<td align="left">undo the last operation.</td>
</tr>
<tr>
<td align="left">Ctrl+r</td>
<td align="left">redo the last undo.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">f or F</td>
<td align="left">Search for the next occurrence of a character or go to the previous occurrence</td>
</tr>
<tr>
<td align="left">Bookmarks</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">m {a-z A-Z}</td>
<td align="left">Set bookmark {a-z A-Z} at the current cursor position</td>
</tr>
<tr>
<td align="left">:marks</td>
<td align="left">List all bookmarks</td>
</tr>
<tr>
<td align="left">`{a-z A-Z}</td>
<td align="left">Jumps to the bookmark {a-z A-Z}</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Select text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">v</td>
<td align="left">Enter visual mode per character</td>
</tr>
<tr>
<td align="left">V</td>
<td align="left">Enter visual mode per line</td>
</tr>
<tr>
<td align="left">Esc</td>
<td align="left">Exit visual mode</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Modify selected text</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">~</td>
<td align="left">Switch case</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">delete a word.</td>
</tr>
<tr>
<td align="left">c</td>
<td align="left">change</td>
</tr>
<tr>
<td align="left">y</td>
<td align="left">yank</td>
</tr>
<tr>
<td align="left">&gt;</td>
<td align="left">shift right</td>
</tr>
<tr>
<td align="left">&lt;</td>
<td align="left">shift left</td>
</tr>
<tr>
<td align="left">!</td>
<td align="left">filter through an external command</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Save and quit</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">:q</td>
<td align="left">Quits Vim but fails when file has been changed</td>
</tr>
<tr>
<td align="left">:w</td>
<td align="left">Save the file</td>
</tr>
<tr>
<td align="left">:w new_name</td>
<td align="left">Save the file with the new_name filename</td>
</tr>
<tr>
<td align="left">:wq</td>
<td align="left">Save the file and quit Vim.</td>
</tr>
<tr>
<td align="left">:q!</td>
<td align="left">Quit Vim without saving the changes to the file.</td>
</tr>
<tr>
<td align="left">ZZ</td>
<td align="left">Write file, if modified, and quit Vim</td>
</tr>
<tr>
<td align="left">ZQ</td>
<td align="left">Same as :q! Quits Vim without writing changes</td>
</tr>
<tr>
<td align="left">:sav[eas] file</td>
<td align="left">Save file as</td>
</tr>
<tr>
<td align="left">:clo[se]</td>
<td align="left">Close the current pane</td>
</tr>
</tbody></table>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><pre><code class="hljs pgsql">C-ws     Split <span class="hljs-keyword">current</span> <span class="hljs-keyword">window</span> horizontally (alternative :split)
C-wv     Split <span class="hljs-keyword">current</span> <span class="hljs-keyword">window</span> vertically (alternative :vsplit)
C-ww     Jump <span class="hljs-keyword">to</span> the next <span class="hljs-keyword">window</span>
C-wARROW Jump <span class="hljs-keyword">to</span> <span class="hljs-keyword">window</span> left/right/top/bottom (arrow keys) <span class="hljs-keyword">to</span> the <span class="hljs-keyword">current</span>
C-w#&lt;    Shrink/resize <span class="hljs-keyword">current</span> <span class="hljs-keyword">window</span> <span class="hljs-keyword">from</span> the right <span class="hljs-keyword">by</span> # (<span class="hljs-keyword">default</span> <span class="hljs-number">1</span>) 
C-w#&gt;    Increase/resize <span class="hljs-keyword">current</span> <span class="hljs-keyword">window</span> <span class="hljs-keyword">to</span> the right <span class="hljs-keyword">by</span> # (<span class="hljs-keyword">default</span> <span class="hljs-number">1</span>) </code></pre>

<h2 id="surround-vim"><a href="#surround-vim" class="headerlink" title="surround.vim"></a>surround.vim</h2><p>Surround.vim is all about “surroundings”: parentheses, brackets, quotes, XML tags, and more. The plugin provides mappings to easily delete, change and add such surroundings in pairs.</p>
<p>It’s easiest to explain with examples. Press <code>cs&quot;&#39;</code> inside</p>
<pre><code class="hljs 1c"><span class="hljs-string">&quot;Hello world!&quot;</span></code></pre>

<p>to change it to</p>
<pre><code class="hljs 1c">&#x27;Hello world!&#x27;</code></pre>

<p>Now press <code>cs&#39;</code> to change it to</p>
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">q</span>&gt;</span>Hello world!<span class="hljs-tag">&lt;/<span class="hljs-name">q</span>&gt;</span></code></pre>

<p>To go full circle, press <code>cst&quot;</code> to get</p>
<pre><code class="hljs 1c"><span class="hljs-string">&quot;Hello world!&quot;</span></code></pre>

<p>To remove the delimiters entirely, press <code>ds&quot;</code>.</p>
<pre><code class="hljs erlang-repl">Hello world!</code></pre>

<p>Now with the cursor on “Hello”, press <code>ysiw]</code> (<code>iw</code> is a text object).</p>
<pre><code class="hljs csharp">[<span class="hljs-meta">Hello</span>] world!</code></pre>

<p>Let’s make that braces and add some space (use <code>&#125;</code> instead of <code>&#123;</code> for no space): <code>cs]&#123;</code></p>
<pre><code class="hljs dust"><span class="hljs-template-variable">&#123; Hello &#125;</span><span class="xml"> world!</span></code></pre>

<p>Now wrap the entire line in parentheses with <code>yssb</code> or <code>yss)</code>.</p>
<pre><code class="hljs clojure">(&#123; Hello &#125; world!)</code></pre>

<p>Revert to the original text: <code>ds&#123;ds)</code></p>
<pre><code class="hljs erlang-repl">Hello world!</code></pre>

<p>Emphasize hello: <code>ysiw</code></p>
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span> world!</code></pre>

<p>Finally, let’s try out visual mode. Press a capital V (for linewise visual mode) followed by <code>S</code>.</p>
<pre><code class="hljs angelscript">&lt;p <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">important</span>&quot;&gt;
  &lt;<span class="hljs-symbol">em</span>&gt;<span class="hljs-symbol">Hello</span>&lt;/<span class="hljs-symbol">em</span>&gt; <span class="hljs-symbol">world</span>!
&lt;/<span class="hljs-symbol">p</span>&gt;</code></pre>

<p>This plugin is very powerful for HTML and XML editing, a niche which currently seems underfilled in Vim land. (As opposed to HTML/XML <em>inserting</em>, for which many plugins are available). Adding, changing, and removing pairs of tags simultaneously is a breeze.</p>
<p>The <code>.</code> command will work with <code>ds</code>, <code>cs</code>, and <code>yss</code> if you install <a target="_blank" rel="noopener" href="https://github.com/tpope/vim-repeat">repeat.vim</a>.</p>
<h2 id="Search-and-replace"><a href="#Search-and-replace" class="headerlink" title="Search and replace"></a>Search and replace</h2><h3 id="Basic-search-and-replace"><a href="#Basic-search-and-replace" class="headerlink" title="Basic search and replace"></a>Basic search and replace</h3><p>The <code>:substitute</code> command searches for a <a target="_blank" rel="noopener" href="https://vim.fandom.com/wiki/VimTip188">text pattern</a>, and replaces it with a text string. There are many options, but these are what you probably want:</p>
<ul>
<li><p><code>:s/foo/bar/g</code></p>
<p>Find each occurrence of ‘foo’ (in the current line only), and replace it with ‘bar’.</p>
</li>
<li><p><code>:%s/foo/bar/g</code></p>
<p>Find each occurrence of ‘foo’ (in all lines), and replace it with ‘bar’.</p>
</li>
<li><p><code>:%s/foo/bar/gc</code></p>
<p>Change each ‘foo’ to ‘bar’, but ask for confirmation first.</p>
</li>
<li><p><code>:%s/\/bar/gc</code></p>
<p>Change only whole words exactly matching ‘foo’ to ‘bar’; ask for confirmation.</p>
</li>
<li><p><code>:%s/foo/bar/gci</code></p>
<p>Change each ‘foo’ (case insensitive due to the <code>i</code> flag) to ‘bar’; ask for confirmation.</p>
<p><code>:%s/foo\c/bar/gc</code> is the same because <code>\c</code> makes the search case insensitive.</p>
<p>This may be wanted after using <code>:set noignorecase</code> to make searches case sensitive (the default).</p>
</li>
<li><p><code>:%s/foo/bar/gcI</code></p>
<p>Change each ‘foo’ (case sensitive due to the <code>I</code> flag) to ‘bar’; ask for confirmation.</p>
<p><code>:%s/foo\C/bar/gc</code> is the same because <code>\C</code> makes the search case sensitive.</p>
<p>This may be wanted after using <code>:set ignorecase</code> to make searches case insensitive.</p>
</li>
</ul>
<p>The <code>g</code> flag means <em>global</em> – each occurrence in the line is changed, <strong>rather than just the first</strong>. This tip assumes the default setting for the <code>&#39;gdefault&#39;</code> and <code>&#39;edcompatible&#39;</code> option (off), which requires that the <code>g</code> flag be included in <code>%s///g</code> to perform a global substitute. Using <code>:set gdefault</code> creates confusion because then <code>%s///</code> is global, whereas <code>%s///g</code> is not (that is, <code>g</code> reverses its meaning).</p>
<p>When using the <code>c</code> flag, you need to confirm for each match what to do. Vim will output something like: <code>replace with foobar (y/n/a/q/l/^E/^Y)?</code> (where foobar is the replacement part of the <code>:s/.../.../</code> command. You can type <code>y</code> which means to substitute this match, <code>n</code> to skip this match, <code>a</code> to substitute this and all remaining matches (“all” remaining matches), <code>q</code> to quit the command, <code>l</code> to substitute this match and quit (think of “last”), <code>^E</code> to scroll the screen up by holding the Ctrl key and pressing E and <code>^Y</code> to scroll the screen down by holding the Ctrl key and pressing Y. However, the last two choices are only available, if your Vim is a normal, big or huge built or the insert_expand feature was enabled at compile time (look for <code>+insert_expand</code> in the output of <code>:version</code>).</p>
<p>Also when using the <code>c</code> flag, Vim will jump to the first match it finds starting from the top of the buffer and prompt you for confirmation to perform replacement on that match. Vim applies the <code>IncSearch</code> highlight group to the matched text to give you a visual cue as to which match it is operating on (set to <code>reverse</code> by default for all three term types as of Vim 7.3). Additionally, if more than one match is found and you have search highlighting enabled with <code>:set hlsearch</code>, Vim highlights the remaining matches with the <code>Search</code> highlight group. If you do use search highlighting, you should make sure that these two highlight groups are visually distinct or you won’t be able to easily tell which match Vim is prompting you to substitute.</p>
<h3 id="Details"><a href="#Details" class="headerlink" title="Details"></a>Details</h3><p><strong>Search range</strong>:</p>
<table>
<thead>
<tr>
<th><code>:s/foo/bar/g</code></th>
<th>Change each ‘foo’ to ‘bar’ in the current line.</th>
</tr>
</thead>
<tbody><tr>
<td><code>:%s/foo/bar/g</code></td>
<td>Change each ‘foo’ to ‘bar’ in all the lines.</td>
</tr>
<tr>
<td><code>:5,12s/foo/bar/g</code></td>
<td>Change each ‘foo’ to ‘bar’ for all lines from line 5 to line 12 (inclusive).</td>
</tr>
<tr>
<td><code>:&#39;a,&#39;bs/foo/bar/g</code></td>
<td>Change each ‘foo’ to ‘bar’ for all lines from mark a to mark b inclusive (see <strong>Note</strong> below).</td>
</tr>
<tr>
<td><code>:&#39;&lt;,&#39;&gt;s/foo/bar/g</code></td>
<td>When compiled with <code>+visual</code>, change each ‘foo’ to ‘bar’ for all lines within a visual selection. Vim automatically appends the visual selection range (‘&lt;,’&gt;) for any ex command when you select an area and enter <code>:</code>. Also, see <strong>Note</strong> below.</td>
</tr>
<tr>
<td><code>:.,$s/foo/bar/g</code></td>
<td>Change each ‘foo’ to ‘bar’ for all lines from the current line (.) to the last line ($) inclusive.</td>
</tr>
<tr>
<td><code>:.,+2s/foo/bar/g</code></td>
<td>Change each ‘foo’ to ‘bar’ for the current line (.) and the two next lines (+2).</td>
</tr>
<tr>
<td><code>:g/^baz/s/foo/bar/g</code></td>
<td>Change each ‘foo’ to ‘bar’ in each line starting with ‘baz’.</td>
</tr>
</tbody></table>
<p><strong>When searching</strong>:</p>
<p><strong>When replacing</strong>:</p>
<p>You can use <strong>other delimiters</strong> with substitute:</p>
<p>Save typing by using <code>\zs</code> and <code>\ze</code> to set the <strong>start and end of a pattern</strong>. For example, instead of:</p>
<p>Use:</p>
<p> :s/Copyright \zs2007\ze All Rights Reserved/2008/ </p>
<h2 id="Additional-examples"><a href="#Additional-examples" class="headerlink" title="Additional examples"></a>Additional examples</h2><ul>
<li><p><code>:%s/foo/bar/</code></p>
<p>On each line, replace the first occurrence of “foo” with “bar”.</p>
</li>
<li><p><code>:%s/.*\zsfoo/bar/</code></p>
<p>On each line, replace the last occurrence of “foo” with “bar”.</p>
</li>
<li><p><code>:%s/\//g</code></p>
<p>On each line, delete all occurrences of the whole word “foo”.</p>
</li>
<li><p><code>:%s/\.*//</code></p>
<p>On each line, delete the whole word “foo” and all following text (to end of line).</p>
</li>
<li><p><code>:%s/\.\&#123;5&#125;//</code></p>
<p>On each line, delete the first occurrence of the whole word “foo” and the following five characters.</p>
</li>
<li><p><code>:%s/\\zs.*//</code></p>
<p>On each line, delete all text following the whole word “foo” (to end of line).</p>
</li>
<li><p><code>:%s/.*\//</code></p>
<p>On each line, delete the whole word “foo” and all preceding text (from beginning of line).</p>
</li>
<li><p><code>:%s/.*\ze\//</code></p>
<p>On each line, delete all the text preceding the whole word “foo” (from beginning of line).</p>
</li>
<li><p><code>:%s/.*\(\\).*/\1/</code></p>
<p>On each line, delete all the text preceding and following the whole word “foo”.</p>
</li>
<li><p>`:%s/\</p>
<p>On each line, replace each occurrence of “foo” (which starts a word and is not followed by “bar”) by “toto”.</p>
</li>
<li><p><code>:s/^\(\w\)/\u\1/</code></p>
<p>If the first character at the beginning of the <em>current line only</em> is lowercase, switch it to uppercase using <code>\u</code> (see <a target="_blank" rel="noopener" href="https://vim.fandom.com/wiki/Switching_case_of_characters">switching case of characters</a>).</p>
</li>
<li><p><code>:%s/\(.*\n\)\&#123;5\&#125;/&amp;\r/</code></p>
<p>Insert a blank line every 5 lines.</p>
<p>The pattern searches for <code>\(.*\n\)</code> (any line including its line ending) repeated five times (<code>\&#123;5\&#125;</code>).</p>
<p>The replacement is <code>&amp;</code> (the text that was found), followed by <code>\r</code> (newline).</p>
</li>
<li><p><code>:%s/\/\=len(add(list, submatch(1)))?submatch(0):submatch(0)/g</code></p>
<p>Get a list of search results. (the list must exist)</p>
<p>Sets the <code>modified</code> flag, because of the replacement, but the content is unchanged.</p>
<p><strong>Note</strong>: With a recent enough Vim (version 7.3.627 or higher), you can simplify this to:</p>
</li>
<li><p><code>:%s/\/\=add(list, submatch(1))/gn</code></p>
<p>This has the advantage, that the buffer won’t be marked modified and no extra undo state is created. The expression in the replacement part is executed in the sandbox and not allowed to modify the buffer.</p>
</li>
</ul>
<h2 id="Special-cases"><a href="#Special-cases" class="headerlink" title="Special cases"></a>Special cases</h2><p>For substituting patterns with corresponding case-sensitive text, Michael Geddes’s <a target="_blank" rel="noopener" href="https://www.vim.org/scripts/script.php?script_id=6">keepcase</a> plugin can be used, e.g.:</p>
<ul>
<li><p><code>:%SubstituteCase/\cHello/goodBye/g</code></p>
<p>Substitute ‘Hello hello helLo HELLO’ by ‘Goodbye goodbye goodBye GOODBYE’</p>
</li>
</ul>
<p>For changing the offsets in a patch file (line number of a block), this little snippet can be used:</p>
<ul>
<li><code>s/^@@ -\(\d\+\),\(\d\+\) +\(\d\+\),\(\d\+\) @@$/\=&quot;@@ -&quot;.eval(submatch(1)+*offsetdiff*).&quot;,&quot;.submatch(2).&quot; +&quot;.eval(submatch(3)+*offsetdiff*).&quot;,&quot;.submatch(4).&quot; @@&quot;/g</code></li>
</ul>
<p>Useful when we want to strip some blocks from a patch, without patch having to complain about offset differences.</p>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/vim/">vim</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/2020/12/13/hello/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile"></span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/12/08/tricks/">
                        <span class="hidden-mobile">trick</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>





  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>




















</body>
</html>
